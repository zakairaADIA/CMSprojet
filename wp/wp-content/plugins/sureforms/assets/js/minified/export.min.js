function exportForm(e){const o=new XMLHttpRequest;o.open("POST",srfm_export.ajaxurl,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){var e,t;200<=o.status&&o.status<400?(e=JSON.parse(o.responseText),(t=document.createElement("a")).href="data:application/json,"+encodeURIComponent(JSON.stringify(e)),t.download="sureforms-export-form.json",t.click()):console.log("Server Error!")},o.onerror=function(){console.log("Connection Error!")},o.send(`action=export_form&post_id=${e}&nonce=`+srfm_export.srfm_export_nonce)}function bulkExport(){var e=document.querySelector("#doaction");const o=document.querySelector("#bulk-action-selector-top");e&&o&&e.addEventListener("click",e=>{if("export"===o.value){e.preventDefault();e=document.querySelectorAll("#the-list input[type=checkbox]");const t=[];e.forEach(e=>{e.checked&&t.push(e.value)}),0<t.length&&exportForm(t)}})}let data;function handleFileChange(e){var e=e.target.files[0],t=new FileReader;t.onload=e=>{e=JSON.parse(e.target.result),data=e,e=document.querySelector("#import-form-submit");e&&e.removeAttribute("disabled")},t.readAsText(e)}const handleImportForm=()=>{var e,t;data&&(e=srfm_export.site_url,t=srfm_export.srfm_import_endpoint,fetch(e+t,{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json","X-WP-Nonce":srfm_export.import_form_nonce}}).then(e=>{var t;if(console.log({response:e}),e.ok)return(t=document.querySelector("#srfm-import-error"))&&(t.style.display="none"),window.location.reload(),e;throw new Error("HTTP error! Status: "+e.status)}).catch(e=>{var t=document.querySelector("#srfm-import-error");t&&(t.style.display="block"),console.log(e)}))};function importForm(){var e=document.querySelector(".srfm-import-btn");const t=document.querySelector(".srfm-import-wrap");var o=document.querySelector("#import-form-submit");e&&e.addEventListener("click",e=>{e.preventDefault(),t&&t.classList.toggle("srfm-show")}),o&&o.addEventListener("click",e=>{e.preventDefault(),handleImportForm()})}function appendImportBtn(){var e,t=document.querySelector("#posts-filter .search-box");t&&((e=document.createElement("button")).className="button button-secondary srfm-import-btn",e.textContent=wp.i18n.__("Import Form","sureforms"),t.append(e))}document.addEventListener("DOMContentLoaded",function(){appendImportBtn(),importForm(),bulkExport()});